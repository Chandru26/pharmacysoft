<script src="/pharmacysoft/static/js/pharmacysoft/AccountsController.js"></script>

<div ng-controller="AccountsController">
<form name="myForm"  novalidate>
<input type="hidden" id="csrf_token" name="${_csrf.parameterName}" value="${_csrf.token}" >
<input type="hidden" id="user__id" value="${userid}">	

<uib-tabset>
<uib-tab index="0" heading="Accounts Profile">
	<br>
	<button ng-click="accountEditNew()" class="btn btn-xs btn-success">New Account</button>	
	<br>
	<div ng-show="editAccount" class="row">
		<div class="col-sm-1"></div>
		<div class="col-sm-10 well">
			<div class="row">
			<div class="col-sm-5">Account Name
				<input ng-model="account.title" class="form-control">
			</div>
			<div class="col-sm-5">Contact Name
				<input ng-model="account.firstname" class="form-control">
			</div>
			</div>
			
			<br>			
			<div class="row">
			<div class="col-sm-10">Details
				<input ng-model="account.description" class="form-control">
			</div>
			</div><br>
			<div class="row">
			<div class="col-sm-5">Mobile Phone
				<input ng-model="account.phone" class="form-control">
			</div>
			<div class="col-sm-5">Email
				<input ng-model="account.email" class="form-control">
			</div>
			</div><br>
			<div class="row">
			<div class="col-sm-8">Address
				<input ng-model="account.addr.address1" class="form-control">
			</div>
			</div><br>
			<div class="row">
			<div class="col-sm-4">City
				<input ng-model="account.addr.city" class="form-control">
			</div>
			<div class="col-sm-3">State
				<input ng-model="account.addr.province" class="form-control">
			</div>
			<div class="col-sm-3">Pin Code
				<input ng-model="account.addr.zipcode" class="form-control">
			</div>
			</div><br>
			<div class="row">
				<div class="col-sm-8"></div>
				<div class="col-sm-3">
					<button ng-click="accountEditCancel()" class="btn btn-sm btn-warning">Cancel</button>
					<button ng-click="accountEditSave()" class="btn btn-sm btn-success">Save</button>
				</div>
			</div>
		</div>
	</div>	
</uib-tab>
<uib-tab index="1" heading="Accounts Payments">
<div>		
	<div class="row">
			<div class="col-sm-1"> </div>
			<div class="col-sm-8"> 
			<br>Account Transactions<br>
				<table class="table table-bordered table-hover">
				<thead><th>Sl. No.</th><th>Date</th><th>Invoice ID</th><th>Invoice Amount</th><th>Paid Amount</th><th>Balance</th></thead>
					<tbody>
					<tr ng-repeat="pm in accountTrxs">
					<td>{{$index+1}}</td>
					<td>{{pm.created | date:'yyyy-MM-dd'}}</td>
					<td>{{pm.invoices_id}}</td>
					<td>{{pm.expense}}</td>
					<td>{{pm.payment}}</td>
					<td>{{pm.balance}}</td>
					</tr>
					<tr><td></td><td></td><td></td>
					<td>Total Expense = {{totalExpenses}} </td>
					<td>Total Payments  = {{totalPayments}}</td>
					<td>Balance  = {{totalBalance}}</td>
					</tr>
					</tbody>
				</table>
			</div>
		</div>
	<div class="row">
		<div class="col-sm-1"> </div>		
		<div class="col-sm-1" >					
			<input ng-model="payAmount" class="form-control">		
		</div>
		<div>
			<button ng-click="applyPayment(payAmount)" class="btn btn-sm btn-success">Make Payment</button>
		</div>
	</div>
</div>
</uib-tab>
  
</uib-tabset>
 
<div>
	<br>
	Account List<br>	
	<div ui-grid='gridOptions'></div>
</div> 	 
</form>
</div>